<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% block head %}
    <!-- Latest compiled and minified CSS -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,600' rel='stylesheet'>
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"> -->
    <!-- Bootstrap v4.0.0 CSS -->
    {% load static %}
    <!-- United theme from https://bootswatch.com/united/ -->
    <!-- Load Bootstrap  CSS -->
       <link rel="stylesheet" href="{% static 'bootstrap.min.css' %}" />
    <!--<link rel="stylesheet" href="{% static 'dataTables.bootstrap.min.css' %}" />
    <link rel="stylesheet" href="{% static 'styles.css' %}" />  -->
    <link rel="stylesheet" href="{% static 'css/jquery.dataTables.joc.css' %}" />
    <script type="text/javascript"  src="{% static 'js/jquery-3.3.1.js' %}"></script>
    <script type="text/javascript"  src="{% static 'js/jquery.dataTables.min.js' %}"></script>
    <title>Web API Development with Flask</title>
   <!-- Code HightCharts -->
    <script src="{% static 'code/highcharts.js' %}"></script>
    <script src="{% static 'code/modules/series-label.js' %}"></script>
    <script src="{% static 'code/highcharts-3d.js' %}"></script>
    <script src="{% static 'code/modules/exporting.js' %}"></script>
    <script src="{% static 'code/modules/export-data.js' %}"></script>
    {% endblock %}
</head>

<style>
#container{
  padding : 10px;
  border : 10px;
}
body{
  background-color: #ECECEC;
}
.joc1 {
  //padding : 10px;
  border : 6px solid #ECECEC;
  text-align: left;
  max-width: 1800px;
  background-color: #FFF;
  border-color: #ECECEC;
  border-left:5px solid #ECECEC;
}
.joc1 .row .col-sm-8,
.joc1 .row .col-sm-4 {
  padding : 10px;
  border : 10px solid #ECECEC;
  background-color: #FFF;
  border-color: #ECECEC;
}
.joc1 .row .col-sm-4 {
  padding-bottom : 24px;
}
.joc2 {
  padding : 10px;
  border : 6px solid #ECECEC;
  text-align: left;
  background-color: #FFF;
  border-color: #ECECEC;
}
.joc3 {
  padding : 10px;
  border : 6px solid #ECECEC;
  text-align: left;
  max-width: 600px;
  background-color: #FFF;
  border-color: #ECECEC;
  border-left:5px solid #ECECEC;
}
/* navbar */
.navbar-default {
    background-color: #18599A;
    border-color: #E7E7E7;
}
/* Title */
.navbar-default .navbar-brand {
    color: #B5BCC3;
    font-weight: bold;
    font-size: 20px;
}
.navbar-default .navbar-brand:hover,
.navbar-default .navbar-brand:focus {
    color: #FFFFFF;
    font-weight: bold;
}
/* Link */
.navbar-default .navbar-nav > li > a {
    color: #B5BCC3;
    font-weight: bold;
    font-size: 16px;
}
.navbar-default .navbar-nav > li > a:hover,
.navbar-default .navbar-nav > li > a:focus {
    color: #FFFFFF;
    background-color: #185593;
}
.navbar-default .navbar-nav > .active > a,
.navbar-default .navbar-nav > .active > a:hover,
.navbar-default .navbar-nav > .active > a:focus {
    color: #FFFFFF;
    background-color: #13406C;
}
.navbar-default .navbar-nav > .open > a,
.navbar-default .navbar-nav > .open > a:hover,
.navbar-default .navbar-nav > .open > a:focus {
    color: #FFFFFF;
    background-color: #13406C;
}
/* Caret */
.navbar-default .navbar-nav > .dropdown > a .caret {
    border-top-color: #1A5186;
    border-bottom-color: #1A5186;
}
.navbar-default .navbar-nav > .dropdown > a:hover .caret,
.navbar-default .navbar-nav > .dropdown > a:focus .caret {
    border-top-color: #1A5186;
    border-bottom-color: #1A5186;
}
.navbar-default .navbar-nav > .open > a .caret,
.navbar-default .navbar-nav > .open > a:hover .caret,
.navbar-default .navbar-nav > .open > a:focus .caret {
    border-top-color: #1A5186;
    border-bottom-color: #1A5186;
    background-color: #13406C;
}
/* Dropdown */
.navbar-default .navbar-nav > .dropdown > .dropdown-menu > li > a:hover,
.navbar-default .navbar-nav > .dropdown > .dropdown-menu > li > a:focus  {
    border-top-color: #1A5186;
    border-bottom-color: #1A5186;
}
</style>

<body>
<div id="container">

    {% block navigation %}
    <!-- new blue navbar -->



<!-- Static navbar -->

<header class="site-header">
    <nav class="navbar navbar-default" >
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                        aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand"><img  src="{% static 'images/logo.png' %}"></a>
                <a class="navbar-brand" href="{% url 'index'  %}">Django App</a>


            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">





                    {% if selected_menu_item == "index" %}
                    <li class="active"><a href="#">Home</a></li>
                    {% else %}
                    <li><a href="{% url 'index' %}">Home</a></li>
                    {% endif %}

                    {% if selected_menu_item == "about" %}
                    <li class="active"><a href="#">About</a></li>
                    {% else %}
                    <li><a href="{% url 'about'  %}">About</a></li>
                    {% endif %}


                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                           aria-expanded="false">Scripts<span class="caret"></span></a>
                        <ul class="dropdown-menu">

                            {% if selected_menu_item == "candidate" %}
                            <li><a href="#">Candidates</a></li>
                            {% else %}
                            <li><a href="{% url 'backup'  %}">Backup Script</a></li>
                            {% endif %}


                            {% if selected_menu_item == "project" %}
                            <li><a href="#">Projects</a></li>
                            {% else %}
                            <li><a href="{% url 'traffic_interface' %}">Traffic Script</a></li>
                            {% endif %}

                            {% if selected_menu_item == "experience" %}
                            <li><a href="#">Experience</a></li>
                            {% else %}
                            <li><a href="{% url 'show_logs' %}">Mcast Script</a></li>
                            {% endif %}


                        </ul>
                    </li>

                    {% if selected_menu_item == "about" %}
                    <li class="active"><a href="#">Dashboard</a></li>
                    {% else %}
                    <li><a href="{% url 'dashboard'  %}">Dashboard</a></li>
                    {% endif %}

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                           aria-expanded="false">Edit Hosts <span class="caret"></span></a>
                        <ul class="dropdown-menu">

                            {% if selected_menu_item == "candidate" %}
                            <li><a href="#">Candidates</a></li>
                            {% else %}
                            <li><a href="{% url 'get_name'  %}">Add</a></li>
                            {% endif %}


                            {% if selected_menu_item == "project" %}
                            <li><a href="#">Projects</a></li>
                            {% else %}
                            <li><a href="{% url 'delete_device'  %}">Delete</a></li>
                            {% endif %}

                            {% if selected_menu_item == "experience" %}
                            <li><a href="#">Experience</a></li>
                            {% else %}
                            <li><a href="{% url 'get_name' %}">Update</a></li>
                            {% endif %}


                        </ul>
                    </li>

                    {% if selected_menu_item == "logout" %}
                    <li class="active"><a href="#">Logout</a></li>
                    {% else %}
                    <li><a href="{% url 'logout_user'  %}">Logout</a></li>
                    {% endif %}

                </ul>
            </div>
            <!--/.nav-collapse -->
        </div>
        <!--/.container-fluid -->
    </nav>

   </header>

    {% endblock %}

    {% block content %}

    <h2>Please select an option from the menu</h2>
<div class=joc1>
  <div class="row">
                  <div class="col-sm-8">
                    <h3>Nexus Devices Inventory</h3>
                    <table id="datatableHosts" cellspacing="0" class="table table-striped table-bordered" style="width:100%" >
                    <thead>
                        <tr bgcolor="#18599A">
                            <th><font color="#fff">Hostname</font></th>
                            <th><font color="#fff">IP Address</font></th>
                            <th><font color="#fff">Platform</font></th>
                            <th><font color="#fff">IOS Version</font></th>
                        </tr>
                    </thead>
                    </table>
                  </div>
                  <div class="col-sm-4">
                    <h3>Nexus Version Donut-Graph</h3>
                    <p id="demo"></p>
                    <p id="demo1"></p>
                     <div id="container-donut"></div>
                     <p id="demo1"></p>
                  </div>
               </div>

  </div>
<div class=joc2>
  <h3>Multicast Flows on Nexus devices</h3>
    <table id="Mcast_flows_Table" cellspacing="0" class="table table-striped table-bordered" style="width:100%" >
    <thead>
        <tr bgcolor="#bee5eb">
            <th width="10%">Host</th>
            <th>Mcast Source</th>
            <th>Mcast Group</th>
            <th>Input Interface</th>
            <th>RPF Neighbor</th>
            <th>Output Interface</th>
            <th>Flow Status</th>
            <th width="20%">Datetime</th>
        </tr>
    </thead>
    </table>
</div>
<div class=joc3>
  <h3>Scripts Logs</h3>
    <table id="Script_Logs_Table" cellspacing="0" class="table table-striped table-bordered" style="width:100%" >
    <thead>
        <tr bgcolor="#18599A">
            <th width="10%"><font color="#fff">Host</font></th>
            <th><font color="#fff">Script Type</font></th>
            <th><font color="#fff">FileName</font></th>
            <th width="40%"><font color="#fff">Datetime</font></th>
        </tr>
    </thead>
    </table>
</div>
    {% endblock %}
</div>

<footer class="footer">
    <div class="container">
        {% block footer %}
        <p class="text-muted text-center">&copy; Copyright 2020 by <a href="http://packtpub.com/">Jocmtb</a>.</p>
        {% endblock %}
    </div>
</footer>


{% block scripts %}
<!-- jQuery -->

<!-- <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script> -->
<!-- Latest compiled and minified JavaScript -->
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script type="text/javascript"  src="{% static 'jquery.dataTables.min.js' %}"></script>

<!-- Bootstrap v4.0.0 JS -->
<!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script> -->

<script>
$(document).ready(function() {
  $('#datatableHosts').DataTable( {
    "processing": true,
    "paging": true,
    "ajax": "/polls/ajax_hostnames",
    // add column definitions to map your json to the table
    "columns": [
      {data: "hostname"},
      {data: "IP_Address"},
      {data: "platform"},
      {data: "version"},
    ]
  } );
  });

  $(document).ready(function() {
    $('#Mcast_flows_Table').DataTable( {
      "processing": true,
      "paging": true,
      "ajax": "/polls/ajax_mcast_flows",
      // add column definitions to map your json to the table
      "columns": [
        {data: "host"},
        {data: "mcast_src"},
        {data: "mcast_grp"},
        {data: "in_intf"},
        {data: "rpf_nei"},
        {data: "out_intf"},
        {data: "flow_stat"},
        {data: "datetime"},
      ]
    } );
    });

    $(document).ready(function() {
      $('#Script_Logs_Table').DataTable( {
        "processing": true,
        "paging": true,
        "ajax": "/polls/script_logs",
        // add column definitions to map your json to the table
        "columns": [
          {data: "host"},
          {data: "sc_type"},
          {data: "file_name",
        		"render": function(data, type, row, meta){
            			if(type === 'display'){
                		data = '<a href="./session_logs/?file_name=' + data + '"><img src="{% static 'file.png' %}"></a>';
            			}

            		return data;
         		}},
          {data: "datetime"},
        ]
      } );
      });

    $.ajax({
                            url: '/polls/api/hosts/statsnxos1',
                            type: 'GET',
                            async: true,
                            dataType: "json",
                            success: function (data) {
                            document.getElementById("demo").innerHTML = data['data'][0][0]
                            document.getElementById("demo1").innerHTML = data['data'][1][0]
                                            joc(data['data'])
                            }
                    });


    function joc (data) {

                Highcharts.chart('container-donut', {
                    chart: {
                        type: 'pie',
                        options3d: {
                            enabled: true,
                            alpha: 45
                        }
                    },
                    title: {
                        text: 'NX-OS Version Distribution'
                    },
                    subtitle: {
                        text: '3D donut for NX-OS'
                    },
                    plotOptions: {
                        pie: {
                            innerSize: 100,
                            depth: 45
                        }
                    },
                    series: [{
                        name: 'Number amount',
                        data: data
                    }]
                });

                }

  </script>

{% endblock %}


</body>
</html>
